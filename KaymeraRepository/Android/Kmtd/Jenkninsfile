device_ver=$device_ver
USER_DEBUG=$USER_DEBUG
envs=$envs
signed_from=$signed_from
BUILD_TYPE=$BUILD_TYPE
BRANDING=$BRANDING
KPHONE_BUILD=$KPHONE_BUILD
KAYMERA_REPOSITORY_BRANCH=$KAYMERA_REPOSITORY_BRANCH
INFRASTRUCTURE_BRANCH=$INFRASTRUCTURE_BRANCH
AOSP_BRANCH=$AOSP_BRANCH


resolveScm source: [$class: 'GitSCMSource', 
		extensions: [[$class: 'RelativeTargetDirectory', 
			relativeTargetDir: '/mnt/data/projects/Kaymera_Apps']], 
		id: '_', 
		ignoreOnPushNotifications: false, 
		includes: '*', 
		rawRefSpecs: '+refs/heads/*:refs/remotes/origin/*', 
		remote: 'http://gerrit02.kaymera.com:8080/KaymeraRepository', 
		remoteName: 'origin'], 
	targets: ['*/$KAYMERA_REPOSITORY_BRANCH']


properties([
	[$class: 'BuildBlockerProperty', 
	//blockLevel: <object of type hudson.plugins.buildblocker.BuildBlockerProperty.BlockLevel>, 
	blockingJobs: '', 
	//scanQueueFor: <object of type hudson.plugins.buildblocker.BuildBlockerProperty.QueueScanScope>, 
	useBuildBlocker: false], 

	[$class: 'JobRestrictionProperty'], 
	parameters(
		[
		[$class: 'CascadeChoiceParameter', 
		choiceType: 'PT_SINGLE_SELECT', 
		description: '''\nSelect a Job type\n''', 
		filterable: false, 
		name: 'JOB_TYPE', 
		randomName: 'choice-parameter-3883234084844795', 
		referencedParameters: '', 
		script: [$class: 'GroovyScript', 
			fallbackScript: [classpath: [], 
				sandbox: false, 
				script: ''], 
				script: [classpath: [],
				sandbox: false, 
				script: 'def jobTypes = [\'continues\',\'release\']; return jobTypes'
					]
				]
		], 
		[$class: 'CascadeChoiceParameter', 
		choiceType: 'PT_SINGLE_SELECT', 
		description: '''\nSelect a Type\n''', 
		filterable: false, 
		name: 'TYPE', 
		randomName: 'choice-parameter-3883234086893611', 
		referencedParameters: '', 
		script: [$class: 'GroovyScript', 
			fallbackScript: [classpath: [], 
				sandbox: false, 
				script: ''], 
				script: [classpath: [], 
				sandbox: false, 
				script: '''def types = [\'release\',\'debug\'];return types''']
				]
		], 
		[$class: 'CascadeChoiceParameter', 
		choiceType: 'PT_SINGLE_SELECT', 
		description: '''\nSelect a Env\n''', 
		filterable: false, 
		name: 'ENV', 
		referencedParameters: '', 
		script: [$class: 'GroovyScript', 
			fallbackScript: [classpath: [], 
			sandbox: false, 
			script: ''], 
			script: [classpath: [], 
			sandbox: false, 
			script: '''def envs = [\'prod\',\'stb\',\'dev\',\'demo\'];return envs''']
			]
		],
		[$class: 'CascadeChoiceParameter', 
		choiceType: 'PT_SINGLE_SELECT', 
		description: '''\nSelect a KaymerRepository Branch\n''', 
		name: 'KAYMERA_REPOSITORY_BRANCH', 
		script: [$class: 'GroovyScript', 
			fallbackScript: [classpath: [], 
			sandbox: false, 
			script: ''], 
			script: [classpath: [], 
			sandbox: false, 
			script: '''def branchesList = ["kaymera_master-6.0.5:selected"];return branchesList''']
			]
		]
		]),
	pipelineTriggers([])
	])

node {
	stage('checkout KaymeraRepository'){
		resolveScm source: [$class: 'GitSCMSource', 
				extensions: [[$class: 'RelativeTargetDirectory', 
					relativeTargetDir: '/mnt/data/projects/Kaymera_Apps']], 
				id: '_', 
				ignoreOnPushNotifications: false, 
				includes: '*', 
				rawRefSpecs: '+refs/heads/*:refs/remotes/origin/*', 
				remote: 'http://gerrit02.kaymera.com:8080/KaymeraRepository', 
				remoteName: 'origin'], 
			targets: [env.KAYMERA_REPOSITORY_BRANCH]
	}
}

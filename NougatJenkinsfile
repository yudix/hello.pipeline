
// Source Code Management
def sGitUrl = 'http://10.0.50.146:8080/Nougat/platform/build'
def sGitBranch = '*/kaymera_master2-7.1.0'
// Build
def sScriptPath = '/mnt/data/BuildScripts/Node/set-build-id-nougat.sh'
def sScriptAospVerParameter = 'Nougat'
def sScriptBuildNumberParameter = env.BUILD_NUMBER
def sScriptCommand = sScriptPath + " " + sScriptAospVerParameter + " " + sScriptBuildNumberParameter
// Rename build
def sBuildIdJenkinsNougatFile = '/mnt/data/smbshare/share/build_id/build-id-jenkins-nougat.txt'

node ('master'){
  
  stage ('Source Code Management') {
      checkout scm: [$class: 'GitSCM', branches: [[name: sGitBranch]], userRemoteConfigs: [[url: sGitUrl]]]
     //git url: sGitUrl, branch: sGitBranch   
  }
  
  stage ('Build') {
    sh sScriptCommand
  }
  
  stage('Rename build') {
    def buildName =  readFile file: sBuildIdJenkinsNougatFile
    buildName += "-" + env.device_ver
    echo buildName
    currentBuild.displayName = buildName
  }
  
}
